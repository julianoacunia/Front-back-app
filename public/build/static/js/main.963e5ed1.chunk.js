(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{47:function(e,t,n){e.exports=n(85)},52:function(e,t,n){},53:function(e,t,n){},57:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),c=n.n(o),i=(n(52),n(7)),s=n(8),l=n(12),u=n(9),d=n(13),p=(n(53),n(11)),m=n(40),E=n(4),b=n(41),h=n(23),f=n(2),O={items:[],filteredItems:[],error:null,isLoading:!1,message:void 0},g={items:[]},y={isAuth:!1,users:[],error:null,isLoading:!1,message:void 0,logged:!1,token:"",failedLogin:!1},j=Object(E.combineReducers)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return Object(f.a)({},e,{items:t.payload,filteredItems:t.payload,adminActions:!1});case"ORDER_PRODUCTS_BY_PRICE":return Object(f.a)({},e,{sort:t.payload.sort,items:t.payload.items});case"ADD_PRODUCT_PENDING":return Object(f.a)({},e,{isLoading:!0});case"ADD_PRODUCT_SUCCESS":var n=t.payload.product.data,a=[].concat(Object(h.a)(e.items),[n]);return Object(f.a)({},e,{isLoading:!1,items:a});case"ADD_PRODUCT_ERROR":return Object(f.a)({},e,{isLoading:!1,error:t.error,message:t.payload.message});case"UPDATE_PRODUCT_PENDING":return Object(f.a)({},e,{isLoading:!0});case"UPDATE_PRODUCT_SUCCESS":console.log(t.payload);var r=Object(h.a)(e.items),o=r.findIndex((function(e){return e._id===t.payload._id}));return r.splice(o,1,t.payload),Object(f.a)({},e,{isLoading:!1,items:r});case"UPDATE_PRODUCT_ERROR":return Object(f.a)({},e,{isLoading:!1,message:t.payload.message});case"SET_SELECTED_PRODUCT_ID":return Object(f.a)({},e,{productSelected:t.payload});case"DELETE_PRODUCT_PENDING":return Object(f.a)({},e,{isLoading:!0});case"DELETE_PRODUCT_SUCCESS":console.log(t.payload);var c=Object(h.a)(e.items),i=c.findIndex((function(e){return e._id===t.payload._id}));return c.splice(i,1),Object(f.a)({},e,{isLoading:!1,items:c});case"DELETE_PRODUCT_ERROR":return Object(f.a)({},e,{isLoading:!1,message:t.payload.message});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":case"REMOVE_FROM_CART":return{items:t.payload.cartItems};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_AUTH":return Object(f.a)({},e,{isAuth:t.payload.isAuth,token:t.payload.token});case"USER_LOGOUT":return{state:y};case"LOGIN_USER_PENDING":return Object(f.a)({},e,{isLoading:!0,failedLogin:!1});case"LOGIN_USER_SUCCESS":return Object(f.a)({},e,{isLoading:!1,token:t.payload.token,isAuth:!0});case"LOGIN_USER_ERROR":return Object(f.a)({},e,{isLoading:!1,message:t.payload,failedLogin:!0});case"FETCH_USERS":return Object(f.a)({},e,{users:t.payload});case"ADD_USER_PENDING":return Object(f.a)({},e,{isLoading:!0});case"ADD_USER_SUCCESS":var n=t.payload.user,a=[].concat(Object(h.a)(e.users),[n]);return Object(f.a)({},e,{isLoading:!1,users:a});case"ADD_USER_ERROR":return Object(f.a)({},e,{isLoading:!1,error:t.error,message:t.payload.message});default:return e}}}),v=[b.a],C=Object(E.createStore)(j,Object(m.composeWithDevTools)(E.applyMiddleware.apply(void 0,v))),S=n(42),_=n(15),R=n(24),D=n(30),T=(n(57),n(3)),P=function(e){return function(e){e({type:"LOGIN_USER_PENDING"});var t={timeout:25e3,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:document.getElementById("inputName").value,password:document.getElementById("inputPassword").value})};return fetch("http://localhost:5000/api/user/signIn",t).then((function(e){return e.json()})).then((function(t){return"Invalid Email or password"!==t.msg?(console.log(t),e({type:"LOGIN_USER_SUCCESS",payload:t})):e({type:"LOGIN_USER_ERROR",payload:t.error})}))}},N=function(e){return{type:"IS_AUTH",payload:e}},L=function(e){return{type:"USER_LOGOUT"}},A=function(e){return function(t){t({type:"ADD_USER_PENDING"});var n={timeout:25e3,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return console.log("options",n),fetch("http://localhost:5000/api/user",n).then((function(e){return e.json()})).then((function(e){return console.log("POST USER",e),Object.entries(e).length?t({type:"ADD_USER_SUCCESS",payload:{user:e}}):Promise.reject(e)})).catch((function(e){return t({type:"ADD_USER_ERROR",payload:e})}))}},U=n(45),I=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getLogin=function(e){console.log(n.props),n.props.loginAccount(e).then((function(e){console.log(e),n.props.isAuth&&n.props.history.push("/home")}))},n.getLogin=n.getLogin.bind(Object(D.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-container"},r.a.createElement(T.c,{initialValues:{name:"",password:""},onSubmit:this.getLogin},(function(t){var n=t.handleSubmit;return r.a.createElement(T.b,{onSubmit:n,style:{display:"flex",flexDirection:"column",justifyContent:"space-around",marginTop:"20px"}},r.a.createElement("div",{className:"Container"},r.a.createElement("div",{id:"login"},r.a.createElement(T.a,{type:"text",id:"inputName",name:"name",placeholder:"name"}),r.a.createElement(T.a,{type:"password",id:"inputPassword",name:"password",placeholder:"password"})),r.a.createElement("div",{id:"buttonsLoginContainer"},r.a.createElement("div",{className:"createAccount"},r.a.createElement(_.b,{id:"buttonCreateAccount",className:"buttonLogin",to:"/register"},"Create Account")),r.a.createElement("div",{className:"createAccount"},r.a.createElement(_.b,{id:"buttonCreateAccount",className:"buttonLogin",to:"/catalog"},"back to catalog")),e.props.isLoading?r.a.createElement(U.ClipLoader,{size:75,color:"white",loading:!0}):r.a.createElement("button",{type:"submit",id:"buttonLogin",className:"buttonLogin"},"Log In"),r.a.createElement("div",null,e.props.failedLogin?r.a.createElement("div",{id:"bad-credentials"},"BAD CREDENTIALS"):null))))})))}}]),t}(a.Component),k=Object(p.b)((function(e,t){return{users:e.users,isLoading:e.users.isLoading,isAuth:e.users.isAuth,failedLogin:e.users.failedLogin}}),(function(e){return Object(E.bindActionCreators)({loginAccount:P},e)}))(I),x=function(){return function(e){fetch("http://localhost:5000/api/product").then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_PRODUCTS",payload:t})}))}},w=function(e,t){return function(n){var a=Object(h.a)(e);return console.log(a),""!==t?a.sort((function(e,n){return"lowestprice"===t?e.price>n.price?1:-1:e.price<n.price?1:-1})):a.sort((function(e,t){return e.id>t.id?1:-1})),n({type:"ORDER_PRODUCTS_BY_PRICE",payload:{sort:t,items:a}})}},G=function(e){return function(t){t({type:"ADD_PRODUCT_PENDING"});var n=C.getState().users.token,a={timeout:25e3,method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(n)},body:JSON.stringify(e)};return console.log("options",a),fetch("http://localhost:5000/api/product",a).then((function(e){return e.json()})).then((function(e){return console.log("POST PRODUCT",e),Object.entries(e).length?t({type:"ADD_PRODUCT_SUCCESS",payload:{product:e}}):Promise.reject(e)})).catch((function(e){return t({type:"ADD_PRODUCT_ERROR",payload:e})}))}},B=function(e){return console.log(e),function(t){t({type:"UPDATE_PRODUCT_PENDING"});var n=C.getState().users.token,a={timeout:25e3,method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(n)},body:JSON.stringify(Object(f.a)({},e))};return fetch("http://localhost:5000/api/product/".concat(e._id),a).then((function(e){return e.json()})).then((function(n){return console.log("UPDATE PRODUCT",n),Object.entries(n).length?t({type:"UPDATE_PRODUCT_SUCCESS",payload:e}):Promise.reject(n)})).catch((function(e){return t({type:"UPDATE_PRODUCT_ERROR",payload:e})}))}},z=function(e){return function(t){t({type:"SET_SELECTED_PRODUCT_ID",payload:e})}},F=function(e){return function(t){t({type:"DELETE_PRODUCT_PENDING"});var n=C.getState().users.token,a={timeout:25e3,method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(n)}};return fetch("http://localhost:5000/api/product/".concat(e),a).then((function(e){return e.json()})).then((function(e){return console.log("DELETE PRODUCT",e),Object.entries(e).length?t({type:"DELETE_PRODUCT_SUCCESS",payload:e}):Promise.reject(e)})).catch((function(e){return t({type:"DELETE_PRODUCT_ERROR",payload:e})}))}},M=function(e){return"$"+Number(e.toFixed(1)).toLocaleString()+" "},H=function(e,t){return function(n){var a=e.slice(),r=!1;return a.forEach((function(e){e._id===t._id&&(e.count+=1,r=!0)})),r||a.push(Object(f.a)({},t,{count:1})),localStorage.setItem("cartItems",JSON.stringify(a)),n({type:"ADD_TO_CART",payload:{cartItems:a}})}},J=function(e,t){return function(n){var a=e.slice().filter((function(e){return e._id!==t._id}));return localStorage.setItem("cartItems",JSON.stringify(a)),n({type:"REMOVE_FROM_CART",payload:{cartItems:a}})}},V=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.props.products.map((function(t){return r.a.createElement("div",{className:"col-md-4",key:t._id},r.a.createElement("div",{className:"thumbnail text-center"},r.a.createElement("a",{href:"#".concat(t._id),onClick:function(){return e.props.addToCart(e.props.cartItems,t)}},r.a.createElement("img",{src:t.photo,alt:"photo"}),r.a.createElement("p",null,t.title)),r.a.createElement("b",null,M(t.price)),r.a.createElement("button",{className:"btn btn-danger btn-xs",onClick:function(){return e.props.deleteProduct(t._id)}},"Delete Product"),r.a.createElement("button",{className:"btn-update",onClick:function(){return e.props.setProductOnForm(t._id)}},"Update Product")))}));return r.a.createElement("div",{className:"row"},t)}}]),t}(a.Component),W=Object(p.b)((function(e){return{products:e.products.items,cartItems:e.cart.items}}),(function(e){return Object(E.bindActionCreators)({fetchProducts:x,addToCart:H,deleteProduct:F,setProductOnForm:z},e)}))(V),X=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"capturarDatos",value:function(){var e=this;console.log("ENTRO AL CAPTURA");var t=this.props.products.find((function(t){return t._id===e.props.productSelected}));return{title:t.title,description:t.description,availableSize:t.availableSize,price:t.price}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"---Admin panel---"),this.props.isAuth?r.a.createElement("div",{className:"logged"},r.a.createElement("div",null,"Admin session"),r.a.createElement("div",{className:"buttonmenu"},r.a.createElement(_.b,{to:"/login",onClick:this.props.logOut},"Logout"))):r.a.createElement("div",{id:"login2"},r.a.createElement("div",{className:"buttonmenu"},r.a.createElement(_.b,{to:"/register"},"Sign up")),r.a.createElement("div",{className:"buttonmenu"},r.a.createElement(_.b,{to:"/login"},"Login"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",null,r.a.createElement("h4",null,"Add new product \u2193"),r.a.createElement("div",{className:"form-container"},r.a.createElement(T.c,{initialValues:{id:"",photo:"https://via.placeholder.com/150",title:"",description:"",availableSize:"",price:0},onSubmit:function(t){e.props.postProduct(t)}},(function(e){var t=e.handleSubmit;return r.a.createElement(T.b,{onSubmit:t,style:{display:"flex",flexDirection:"column",justifyContent:"space-around",marginTop:"20px",border:"2px solid"}},r.a.createElement(T.a,{type:"text",name:"id",placeholder:"code"}),r.a.createElement(T.a,{type:"text",name:"title",placeholder:"tittle"}),r.a.createElement(T.a,{type:"text",name:"description",placeholder:"description"}),r.a.createElement(T.a,{type:"text",name:"availableSize",placeholder:"availableSize"}),r.a.createElement(T.a,{type:"number",name:"price",placeholder:"price"}),r.a.createElement("button",{type:"submit"},"Submit"))})))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement(W,null)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",null,"Update product"),r.a.createElement(T.c,{initialValues:this.props.productSelected?this.capturarDatos():{title:"",photo:"https://via.placeholder.com/150",description:"",availableSize:"",price:0},onSubmit:function(t){e.props.updateProduct(Object(f.a)({},t,{_id:e.props.productSelected}))}},(function(e){var t=e.handleSubmit;return r.a.createElement(T.b,{onSubmit:t,style:{display:"flex",flexDirection:"column",justifyContent:"space-around",marginTop:"40px",border:"2px solid"}},r.a.createElement(T.a,{type:"text",name:"title",placeholder:"tittle"}),r.a.createElement(T.a,{type:"text",name:"description",placeholder:"description"}),r.a.createElement(T.a,{type:"text",name:"availableSize",placeholder:"availableSize"}),r.a.createElement(T.a,{type:"number",name:"price",placeholder:"price"}),r.a.createElement("button",{type:"submit"},"Submit"))})))))}}]),t}(a.Component),Y=Object(p.b)((function(e){return{products:e.products.items,isLoading:e.isLoading,isAuth:e.isAuth,productSelected:e.products.productSelected}}),(function(e){return Object(E.bindActionCreators)({postProduct:G,updateProduct:B,isAuth:N,logOut:L},e)}))(X),$=(n(84),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"top"},r.a.createElement("h2",null,"WELCOME TO THE REGISTER, COMPLETE THE FIELDS BELOW TO CREATE USER")),r.a.createElement(T.c,{initialValues:{name:"",email:"",password:"",address:""},onSubmit:function(t){e.props.postUser(t)}},(function(e){var t=e.handleSubmit;return r.a.createElement(T.b,{onSubmit:t,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:"20px"}},r.a.createElement(T.a,{type:"text",name:"name",id:"inputUser",placeholder:"name",style:{margin:"15px"}}),r.a.createElement(T.a,{type:"text",name:"email",id:"inputEmail",placeholder:"email",style:{margin:"15px"}}),r.a.createElement(T.a,{type:"password",name:"password",id:"inputPassword",placeholder:"password",style:{margin:"15px"}}),r.a.createElement(T.a,{type:"text",name:"address",id:"inputAddress",placeholder:"address",style:{margin:"15px"}}),r.a.createElement("button",{id:"submitButton",type:"submit"},"Submit"))})),r.a.createElement("div",{id:"container-back-to-login"},r.a.createElement(_.b,{id:"back-to-login",to:"/login"},"Back to Login"),r.a.createElement(_.b,{id:"back-to-login",to:"/catalog"},"Back to Catalog"))))}}]),t}(a.Component)),q=Object(p.b)((function(e){return{users:e.users,isLoading:e.isLoading}}),(function(e){return Object(E.bindActionCreators)({postUser:A},e)}))($),K=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.cartItems;return r.a.createElement("div",{className:"alert alert-info"},0===t.length?"Basket is empty":r.a.createElement("div",null,"you have ",t.length," products in the basket"),t.length>0&&r.a.createElement("div",null,r.a.createElement("ul",{style:{marginLeft:-25}},t.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("b",null,t.title),r.a.createElement("button",{style:{float:"right"},className:"btn btn-danger btn-xs",onClick:function(){return e.props.removeFromCart(e.props.cartItems,t)}},"X"),r.a.createElement("br",null),t.count," X ",M(t.price))}))),r.a.createElement("b",null,"Sum:"," ",M(t.reduce((function(e,t){return e+t.price*t.count}),0))),r.a.createElement("button",{className:"btn btn-primary"},"checkout")))}}]),t}(a.Component),Q=Object(p.b)((function(e){return{cartItems:e.cart.items}}),(function(e){return Object(E.bindActionCreators)({removeFromCart:J},e)}))(K),Z=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},"".concat(this.props.products.length," products found.")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",null,"Order by",r.a.createElement("select",{className:"form-control",value:this.props.sort,onChange:function(t){return e.props.sortProducts(e.props.products,t.target.value)}},r.a.createElement("option",{value:""},"Price"),r.a.createElement("option",{value:"lowestprice"},"Lowest to highest"),r.a.createElement("option",{value:"highestprice"},"Highest to lowest")))))}}]),t}(a.Component),ee=Object(p.b)((function(e){return{products:e.products.items,filteredProducts:e.products.filteredItems,sort:e.products.sort}}),(function(e){return Object(E.bindActionCreators)({sortProducts:w},e)}))(Z),te=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.props.products.map((function(t){return r.a.createElement("div",{className:"col-md-4",key:t._id},r.a.createElement("div",{className:"thumbnail text-center"},r.a.createElement("a",{href:"#".concat(t._id),onClick:function(){return e.props.addToCart(e.props.cartItems,t)}},r.a.createElement("img",{src:t.photo,alt:"photo"}),r.a.createElement("p",null,t.title)),r.a.createElement("b",null,M(t.price)),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.addToCart(e.props.cartItems,t)}},"Add to cart")))}));return r.a.createElement("div",{className:"row"},t)}}]),t}(a.Component),ne=Object(p.b)((function(e){return{products:e.products.items,cartItems:e.cart.items}}),(function(e){return Object(E.bindActionCreators)({addToCart:H,fetchProducts:x},e)}))(te),ae=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"---Welcome to t-shirts store!---"),r.a.createElement("div",{id:"login2"},r.a.createElement("div",{className:"buttonmenu"},r.a.createElement(_.b,{to:"/register"},"Sign up")),r.a.createElement("div",{className:"buttonmenu"},r.a.createElement(_.b,{to:"/login"},"Login"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement(ee,null),r.a.createElement(ne,null)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Q,null))))}}]),t}(a.Component),re=Object(p.b)((function(e){return{products:e.products,isLoading:e.isLoading,isAuth:e.isAuth}}),(function(e){return Object(E.bindActionCreators)({},e)}))(ae),oe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(_.a,null,r.a.createElement(R.d,null,r.a.createElement(ce,{exact:!0,path:"/home",component:Y}),r.a.createElement(R.b,{exact:!0,path:"/catalog",component:re}),r.a.createElement(R.b,{exact:!0,path:"/login",component:k}),r.a.createElement(R.b,{exact:!0,path:"/register",component:q}),r.a.createElement(R.a,{from:"/",to:"/catalog"})))}}]),t}(a.Component),ce=function(e){var t=e.component,n=Object(S.a)(e,["component"]);return r.a.createElement(R.b,Object.assign({},n,{render:function(e){return C.getState().users.token?r.a.createElement(t,e):r.a.createElement(R.a,{to:"/"})}}))},ie=Object(p.b)()(oe),se=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:C},r.a.createElement(ie,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.963e5ed1.chunk.js.map